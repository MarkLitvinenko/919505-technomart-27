var isIndex=document.body.classList.contains("js-index"),buyLinks=document.querySelectorAll(".buy-button"),buyPopup=document.querySelector(".popup-added-to-cart-section"),buyContinue=buyPopup.querySelector(".popup-added-to-cart-continue-button"),buyClose=buyPopup.querySelector(".modal-close-button"),chosenProducts=document.querySelector(".cart-button"),chosenProductsQuantity=0;function closePopup(e,o){o.preventDefault(),e.classList.remove("modal-show")}function putProductToCart(){chosenProducts.classList.add("header-menu-button-not-empty"),chosenProducts.innerHTML="Корзина: "+chosenProductsQuantity}for(isIndex||(chosenProductsQuantity=10,putProductToCart()),i=0;i<buyLinks.length;i++)buyLinks[i].addEventListener("click",function(e){e.preventDefault(),buyPopup.classList.add("modal-show"),chosenProductsQuantity++,putProductToCart()});buyContinue.addEventListener("click",function(e){closePopup(buyPopup,e)}),buyClose.addEventListener("click",function(e){e.preventDefault(),buyPopup.classList.remove("modal-show")}),window.addEventListener("keydown",function(e){27===e.keyCode&&buyPopup.classList.contains("modal-show")&&closePopup(buyPopup,e)});var bookmarks=document.querySelector(".bookmarks-button"),addToBookmarksButtons=document.querySelectorAll(".add-to-bookmarks-button"),bookmarksQuantity=0;for(i=0;i<addToBookmarksButtons.length;i++)addToBookmarksButtons[i].addEventListener("click",function(e){e.preventDefault(),bookmarksQuantity++,bookmarks.classList.add("header-menu-button-not-empty"),bookmarks.innerHTML="Закладки: "+bookmarksQuantity});var mapLink=document.querySelector(".interactive-map-img");if(mapLink){var mapPopup=document.querySelector(".popup-map-section"),mapClose=mapPopup.querySelector(".modal-close-button");mapLink.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.add("modal-show")}),mapClose.addEventListener("click",function(e){closePopup(mapPopup,e)}),window.addEventListener("keydown",function(e){27===e.keyCode&&mapPopup.classList.contains("modal-show")&&closePopup(mapPopup,e)})}var feedbacklink=document.querySelector(".write-us-button");if(feedbacklink){var feedbackPopup=document.querySelector(".write-us-section"),feedbackClose=feedbackPopup.querySelector(".modal-close-button"),form=feedbackPopup.querySelector("form"),fields=form.querySelectorAll(".write-us-form-input"),nameField=form.querySelector("[name=name]"),emailField=form.querySelector("[name=email]"),messageField=form.querySelector("[name=message]"),isStorageSupport=!0,nameStorage="",emailStorage="";try{nameStorage=localStorage.getItem("name"),emailStorage=localStorage.getItem("email")}catch(e){isStorageSupport=!1}feedbacklink.addEventListener("click",function(e){e.preventDefault(),feedbackPopup.classList.add("modal-show"),nameStorage&&(nameField.value=nameStorage),emailStorage&&(emailField.value=emailStorage);for(var o=0;o<fields.length;o++)if(!fields[o].value){fields[o].focus();break}o===fields.length&&fields[o-1].focus()}),feedbackClose.addEventListener("click",function(e){closePopup(feedbackPopup,e),feedbackPopup.classList.remove("modal-error")}),form.addEventListener("submit",function(e){nameField.value&&emailField.value&&messageField.value?isStorageSupport&&(localStorage.setItem("name",nameField.value),localStorage.setItem("email",email.value)):(e.preventDefault(),feedbackPopup.classList.remove("modal-error"),feedbackPopup.offsetWidth=feedbackPopup.offsetWidth,feedbackPopup.classList.add("modal-error"),console.log("Нужно ввести имя, почтовый ящик и сообщение"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),feedbackPopup.classList.contains("modal-show")&&(feedbackPopup.classList.remove("modal-show"),feedbackPopup.classList.remove("modal-error")))})}
